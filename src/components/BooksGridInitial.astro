---
// TODO How to read from Astro content collection files?
// TODO How to validate Astro data with imported TypeScript interface?
import BooksGrid from './BooksGrid';
import {
  getCollection,
  type CollectionEntry,
  type InferEntrySchema
} from 'astro:content';
const books: CollectionEntry<'book'>[] = (
  await getCollection(
    'book',
    ({ data }: { data: InferEntrySchema<'book'> }) => {
      return !!data.showOnHomepage;
    },
  )
).sort((a, b) => b.data.pubYear - a.data.pubYear);
const gridId = 'astro-grid-generated-id'; // TODO use uuid
// Map the data to the format the React component expects
const booksForReact = books.map(bookEntry => ({
  id: bookEntry.id,
  ...bookEntry.data,
}));
// still gives  /app/index.html[InvalidComponentArgs] Invalid arguments passed to component.
// ^ only at build time
---
<BooksGrid gridId={gridId} books={booksForReact} />
